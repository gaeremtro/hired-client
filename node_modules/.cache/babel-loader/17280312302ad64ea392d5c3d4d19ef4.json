{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielpenalva/Documents/Skylab Hired/gabriel-penalva-skylab-hired/Client/skylab-hired/src/components/entryComment.component.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { loadComments, loadDetails } from '../actions/userActions';\nimport Detail from './detail.component';\nimport CommentDetail from './commentDetail.compoent';\nimport store from '../store/store';\nimport '../styles/entry.load.style.scss';\nlet entryId = 0;\n\nfunction EntryComment({\n  props\n}) {\n  const [comments, setComments] = useState([]);\n  const [entry, setEntry] = useState(store.getOneEntry(props.match.params.entryId));\n  if (entry) entryId = entry._id; // const usu = store.getUser();\n\n  useEffect(() => {\n    store.addChangeListener(onChange);\n    console.log('ssssd');\n\n    if (entry === undefined) {\n      loadDetails();\n    }\n\n    if (entry) {\n      loadComments();\n    }\n\n    return () => {\n      return store.removeChangeListener(onChange);\n    };\n  }, [entry, comments.length]);\n\n  function onChange() {\n    console.log('onchange');\n    setEntry(store.getOneEntry(props.match.params.entryId));\n\n    if (entry) {\n      setComments(store.getUserComments(entry));\n    }\n\n    if (store.isNewComment()) {\n      loadDetails();\n      loadComments();\n      setComments(store.getUserComments(entry));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, entry && /*#__PURE__*/React.createElement(Detail, {\n    detail: entry,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(CommentDetail, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 4\n    }\n  }), comments && entry && comments.map(current => {\n    return /*#__PURE__*/React.createElement(CommentDetail, {\n      key: current._id,\n      detail: current,\n      entryId: entryId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    });\n  }), !entry && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 6\n    }\n  }, \"Maybe there is nothing here...\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://thumbs.gfycat.com/FrailFirsthandAnnashummingbird-max-1mb.gif\",\n    alt: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 6\n    }\n  })));\n}\n\nexport default EntryComment;","map":{"version":3,"sources":["/Users/gabrielpenalva/Documents/Skylab Hired/gabriel-penalva-skylab-hired/Client/skylab-hired/src/components/entryComment.component.jsx"],"names":["React","useState","useEffect","loadComments","loadDetails","Detail","CommentDetail","store","entryId","EntryComment","props","comments","setComments","entry","setEntry","getOneEntry","match","params","_id","addChangeListener","onChange","console","log","undefined","removeChangeListener","length","getUserComments","isNewComment","map","current"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,wBAA1C;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAO,iCAAP;AACA,IAAIC,OAAO,GAAG,CAAd;;AACA,SAASC,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAiC;AAChC,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CACjCM,KAAK,CAACQ,WAAN,CAAkBL,KAAK,CAACM,KAAN,CAAYC,MAAZ,CAAmBT,OAArC,CADiC,CAAlC;AAGA,MAAIK,KAAJ,EAAWL,OAAO,GAAGK,KAAK,CAACK,GAAhB,CALqB,CAMhC;;AACAhB,EAAAA,SAAS,CAAC,MAAM;AACfK,IAAAA,KAAK,CAACY,iBAAN,CAAwBC,QAAxB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;AAEA,QAAIT,KAAK,KAAKU,SAAd,EAAyB;AACxBnB,MAAAA,WAAW;AACX;;AACD,QAAIS,KAAJ,EAAW;AACVV,MAAAA,YAAY;AACZ;;AACD,WAAO,MAAM;AACZ,aAAOI,KAAK,CAACiB,oBAAN,CAA2BJ,QAA3B,CAAP;AACA,KAFD;AAGA,GAbQ,EAaN,CAACP,KAAD,EAAQF,QAAQ,CAACc,MAAjB,CAbM,CAAT;;AAeA,WAASL,QAAT,GAAoB;AACnBC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAEAR,IAAAA,QAAQ,CAACP,KAAK,CAACQ,WAAN,CAAkBL,KAAK,CAACM,KAAN,CAAYC,MAAZ,CAAmBT,OAArC,CAAD,CAAR;;AACA,QAAIK,KAAJ,EAAW;AACVD,MAAAA,WAAW,CAACL,KAAK,CAACmB,eAAN,CAAsBb,KAAtB,CAAD,CAAX;AACA;;AACD,QAAIN,KAAK,CAACoB,YAAN,EAAJ,EAA0B;AACzBvB,MAAAA,WAAW;AACXD,MAAAA,YAAY;AACZS,MAAAA,WAAW,CAACL,KAAK,CAACmB,eAAN,CAAsBb,KAAtB,CAAD,CAAX;AACA;AACD;;AAED,sBACC,0CACEA,KAAK,iBAAI,oBAAC,MAAD;AAAQ,IAAA,MAAM,EAAEA,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADX,eAEC,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,EAGEF,QAAQ,IACRE,KADA,IAEAF,QAAQ,CAACiB,GAAT,CAAcC,OAAD,IAAa;AACzB,wBACC,oBAAC,aAAD;AACC,MAAA,GAAG,EAAEA,OAAO,CAACX,GADd;AAEC,MAAA,MAAM,EAAEW,OAFT;AAGC,MAAA,OAAO,EAAErB,OAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD;AAOA,GARD,CALF,EAeE,CAACK,KAAD,iBACA;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADD,eAEC;AACC,IAAA,GAAG,EAAC,sEADL;AAEC,IAAA,GAAG,EAAC,SAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,CAhBF,CADD;AA2BA;;AAED,eAAeJ,YAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { loadComments, loadDetails } from '../actions/userActions';\nimport Detail from './detail.component';\nimport CommentDetail from './commentDetail.compoent';\nimport store from '../store/store';\nimport '../styles/entry.load.style.scss';\nlet entryId = 0;\nfunction EntryComment({ props }) {\n\tconst [comments, setComments] = useState([]);\n\tconst [entry, setEntry] = useState(\n\t\tstore.getOneEntry(props.match.params.entryId)\n\t);\n\tif (entry) entryId = entry._id;\n\t// const usu = store.getUser();\n\tuseEffect(() => {\n\t\tstore.addChangeListener(onChange);\n\t\tconsole.log('ssssd');\n\n\t\tif (entry === undefined) {\n\t\t\tloadDetails();\n\t\t}\n\t\tif (entry) {\n\t\t\tloadComments();\n\t\t}\n\t\treturn () => {\n\t\t\treturn store.removeChangeListener(onChange);\n\t\t};\n\t}, [entry, comments.length]);\n\n\tfunction onChange() {\n\t\tconsole.log('onchange');\n\n\t\tsetEntry(store.getOneEntry(props.match.params.entryId));\n\t\tif (entry) {\n\t\t\tsetComments(store.getUserComments(entry));\n\t\t}\n\t\tif (store.isNewComment()) {\n\t\t\tloadDetails();\n\t\t\tloadComments();\n\t\t\tsetComments(store.getUserComments(entry));\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{entry && <Detail detail={entry}></Detail>}\n\t\t\t<CommentDetail />\n\t\t\t{comments &&\n\t\t\t\tentry &&\n\t\t\t\tcomments.map((current) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<CommentDetail\n\t\t\t\t\t\t\tkey={current._id}\n\t\t\t\t\t\t\tdetail={current}\n\t\t\t\t\t\t\tentryId={entryId}\n\t\t\t\t\t\t></CommentDetail>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t{!entry && (\n\t\t\t\t<div className=\"loading\">\n\t\t\t\t\t<h1>Maybe there is nothing here...</h1>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc=\"https://thumbs.gfycat.com/FrailFirsthandAnnashummingbird-max-1mb.gif\"\n\t\t\t\t\t\talt=\"loading\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default EntryComment;\n"]},"metadata":{},"sourceType":"module"}